{
  "version": 3,
  "sources": ["../../../../src/common/errors/utils/getErrorMessageWithLink.ts"],
  "sourcesContent": ["import { getLogs } from '@prisma/debug'\nimport { getGithubIssueUrl, link } from '../../utils/util'\nimport stripAnsi from 'strip-ansi'\nimport { maskQuery } from './maskQuery'\nimport { normalizeLogs } from './normalizeLogs'\nimport { ErrorWithLinkInput } from '../types/ErrorWithLinkInput'\n\nexport function getErrorMessageWithLink({\n  version,\n  platform,\n  title,\n  description,\n  engineVersion,\n  database,\n  query,\n}: ErrorWithLinkInput) {\n  const gotLogs = getLogs(6000 - (query?.length ?? 0))\n  const logs = normalizeLogs(stripAnsi(gotLogs))\n  const moreInfo = description\n    ? `# Description\\n\\`\\`\\`\\n${description}\\n\\`\\`\\``\n    : ''\n  const body = stripAnsi(\n    `Hi Prisma Team! My Prisma Client just crashed. This is the report:\n## Versions\n\n| Name            | Version            |\n|-----------------|--------------------|\n| Node            | ${process.version?.padEnd(19)}| \n| OS              | ${platform?.padEnd(19)}|\n| Prisma Client   | ${version?.padEnd(19)}|\n| Query Engine    | ${engineVersion?.padEnd(19)}|\n| Database        | ${database?.padEnd(19)}|\n\n${moreInfo}\n\n## Logs\n\\`\\`\\`\n${logs}\n\\`\\`\\`\n\n## Client Snippet\n\\`\\`\\`ts\n// PLEASE FILL YOUR CODE SNIPPET HERE\n\\`\\`\\`\n\n## Schema\n\\`\\`\\`prisma\n// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE\n\\`\\`\\`\n\n## Prisma Engine Query\n\\`\\`\\`\n${query ? maskQuery(query) : ''}\n\\`\\`\\`\n`,\n  )\n\n  const url = getGithubIssueUrl({ title, body })\n  return `${title}\n\nThis is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.\n\n${link(url)}\n\nIf you want the Prisma team to look into it, please open the link above \uD83D\uDE4F\nTo increase the chance of success, please post your schema and a snippet of\nhow you used Prisma Client in the issue. \n`\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,mBAAwB;AACxB,kBAAwC;AACxC,wBAAsB;AACtB,uBAA0B;AAC1B,2BAA8B;AAGvB,iCAAiC;AAAA,EACtC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GACqB;AAfvB;AAgBE,QAAM,UAAU,0BAAQ,MAAQ,sCAAO,WAAP,YAAiB;AACjD,QAAM,OAAO,wCAAc,+BAAU;AACrC,QAAM,WAAW,cACb;AAAA;AAAA,EAA0B;AAAA,UAC1B;AACJ,QAAM,OAAO,+BACX;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKkB,cAAQ,YAAR,mBAAiB,OAAO;AAAA,sBACxB,qCAAU,OAAO;AAAA,sBACjB,mCAAS,OAAO;AAAA,sBAChB,+CAAe,OAAO;AAAA,sBACtB,qCAAU,OAAO;AAAA;AAAA,EAErC;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeA,QAAQ,gCAAU,SAAS;AAAA;AAAA;AAK3B,QAAM,MAAM,mCAAkB,EAAE,OAAO;AACvC,SAAO,GAAG;AAAA;AAAA;AAAA;AAAA,EAIV,sBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
